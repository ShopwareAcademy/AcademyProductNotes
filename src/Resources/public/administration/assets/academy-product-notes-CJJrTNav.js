const a=`{% block sw_product_detail_content_tabs_additional %} <sw-tabs-item name="notes" :route="{ name: 'sw.product.detail.notes', params: { id: $route.params.id } }" :title="$tc('academy-product-notes.detail.tabNotes')"> {{ $tc('academy-product-notes.detail.tabNotes') }} </sw-tabs-item> {% endblock %} {% block sw_product_detail_content_view %} <router-view v-slot="{ Component }" > <component :is="Component" @cover-change="onCoverChange" /> </router-view> <sw-product-detail-notes v-if="$route.name === 'sw.product.detail.notes'" :product="product"> </sw-product-detail-notes> {% endblock %}`,{Component:s}=Shopware;s.override("sw-product-detail",{template:a,computed:{productCriteria(){const e=this.$super("productCriteria");return e.addAssociation("academyProductNotes"),e}}});const l=`<sw-card :title="$tc('academy-product-notes.detail.cardTitle')" :isLoading="isLoading"> <template #toolbar> <sw-button variant="primary" size="small" @click="onAddNote"> {{ $tc('academy-product-notes.detail.buttonAddNote') }} </sw-button> </template> <template #grid> <sw-data-grid v-if="notes.length > 0" :dataSource="notes" :columns="noteColumns" :showSelection="false" :isLoading="isLoading"> <template #column-note="{ item }"> <div class="academy-note-preview"> {{ item.note.length > 100 ? item.note.substring(0, 100) + '...' : item.note }} </div> </template> <template #column-solved="{ item }"> <sw-icon v-if="item.solved" name="small-default-checkmark-line-medium" color="#37d046"> </sw-icon> <sw-icon v-else name="small-default-x-line-medium" color="#de294c"> </sw-icon> </template> <template #column-createdAt="{ item }"> {{ item.createdAt | date }} </template> <template #actions="{ item }"> <sw-context-menu-item @click="onEditNote(item)"> {{ $tc('academy-product-notes.detail.buttonEdit') }} </sw-context-menu-item> <sw-context-menu-item variant="danger" @click="onDeleteNote(item)"> {{ $tc('academy-product-notes.detail.buttonDelete') }} </sw-context-menu-item> </template> </sw-data-grid> <sw-empty-state v-else :title="$tc('academy-product-notes.detail.messageNoNotes')"> </sw-empty-state> </template> <academy-product-note-modal v-if="showModal" :note="currentNote" @save="onSaveNote" @close="onCloseModal"> </academy-product-note-modal> <sw-modal v-if="showDeleteModal" :title="$tc('academy-product-notes.detail.buttonDelete')" variant="small" @modal-close="onCancelDelete"> <p>{{ $tc('academy-product-notes.detail.messageDeleteConfirm') }}</p> <template #modal-footer> <sw-button size="small" @click="onCancelDelete"> {{ $tc('academy-product-notes.detail.buttonCancel') }} </sw-button> <sw-button variant="danger" size="small" @click="onConfirmDelete"> {{ $tc('academy-product-notes.detail.buttonDelete') }} </sw-button> </template> </sw-modal> </sw-card>`,{Component:i,Mixin:d}=Shopware,{Criteria:t}=Shopware.Data;i.register("sw-product-detail-notes",{template:l,inject:["repositoryFactory"],mixins:[d.getByName("notification")],props:{product:{type:Object,required:!0}},data(){return{notes:[],isLoading:!1,showModal:!1,currentNote:null,showDeleteModal:!1,noteToDelete:null}},computed:{noteRepository(){return this.repositoryFactory.create("academy_product_note")},noteColumns(){return[{property:"userName",label:this.$tc("academy-product-notes.detail.columnUserName"),rawData:!0},{property:"note",label:this.$tc("academy-product-notes.detail.columnNote"),rawData:!0},{property:"solved",label:this.$tc("academy-product-notes.detail.columnSolved"),rawData:!0},{property:"createdAt",label:this.$tc("academy-product-notes.detail.columnCreatedAt"),rawData:!0}]}},created(){this.loadNotes()},methods:{loadNotes(){this.isLoading=!0;const e=new t;e.addFilter(t.equals("productId",this.product.id)),e.addSorting(t.sort("createdAt","DESC")),this.noteRepository.search(e,Shopware.Context.api).then(o=>{this.notes=o}).finally(()=>{this.isLoading=!1})},onAddNote(){this.currentNote=this.noteRepository.create(Shopware.Context.api),this.currentNote.productId=this.product.id,this.currentNote.solved=!1,this.showModal=!0},onEditNote(e){this.currentNote=e,this.showModal=!0},onDeleteNote(e){this.noteToDelete=e,this.showDeleteModal=!0},onConfirmDelete(){this.noteToDelete&&this.noteRepository.delete(this.noteToDelete.id,Shopware.Context.api).then(()=>{this.createNotificationSuccess({message:this.$tc("academy-product-notes.detail.messageDeleteSuccess")}),this.loadNotes()}).catch(()=>{this.createNotificationError({message:this.$tc("academy-product-notes.detail.messageError")})}).finally(()=>{this.showDeleteModal=!1,this.noteToDelete=null})},onCancelDelete(){this.showDeleteModal=!1,this.noteToDelete=null},onSaveNote(){this.noteRepository.save(this.currentNote,Shopware.Context.api).then(()=>{this.createNotificationSuccess({message:this.$tc("academy-product-notes.detail.messageSaveSuccess")}),this.showModal=!1,this.loadNotes()}).catch(()=>{this.createNotificationError({message:this.$tc("academy-product-notes.detail.messageError")})})},onCloseModal(){this.showModal=!1,this.currentNote=null}}});const{Module:n}=Shopware;n.register("sw-product",{routes:{detail:{children:{notes:{component:"sw-product-detail-notes",path:"notes",meta:{parentPath:"sw.product.index",privilege:"product.viewer"}}}}}});const c=`<sw-modal :title="modalTitle" @modal-close="onClose"> <template #modal-body> <sw-container columns="1fr" gap="20px"> <sw-text-field v-model="note.userName" :label="$tc('academy-product-notes.detail.labelUserName')" :placeholder="$tc('academy-product-notes.detail.placeholderUserName')" required> </sw-text-field> <sw-textarea-field v-model="note.note" :label="$tc('academy-product-notes.detail.labelNote')" :placeholder="$tc('academy-product-notes.detail.placeholderNote')" required> </sw-textarea-field> <sw-checkbox-field v-model="note.solved" :label="$tc('academy-product-notes.detail.labelSolved')"> </sw-checkbox-field> </sw-container> </template> <template #modal-footer> <sw-button size="small" @click="onClose"> {{ $tc('academy-product-notes.detail.buttonCancel') }} </sw-button> <sw-button variant="primary" size="small" @click="onSave"> {{ $tc('academy-product-notes.detail.buttonSave') }} </sw-button> </template> </sw-modal>`,{Component:r}=Shopware;r.register("academy-product-note-modal",{template:c,props:{note:{type:Object,required:!0}},computed:{modalTitle(){return this.note.isNew()?this.$tc("academy-product-notes.detail.buttonAddNote"):this.$tc("academy-product-notes.detail.buttonEdit")}},methods:{onSave(){this.$emit("save")},onClose(){this.$emit("close")}}});
//# sourceMappingURL=academy-product-notes-CJJrTNav.js.map
