{"version":3,"file":"academy-product-notes-CJJrTNav.js","sources":["../../../app/administration/src/module/sw-product/page/sw-product-detail/sw-product-detail.html.twig","../../../app/administration/src/module/sw-product/page/sw-product-detail/index.js","../../../app/administration/src/module/sw-product/page/sw-product-detail-notes/sw-product-detail-notes.html.twig","../../../app/administration/src/module/sw-product/page/sw-product-detail-notes/index.js","../../../app/administration/src/module/sw-product/index.js","../../../app/administration/src/component/academy-product-note-modal/academy-product-note-modal.html.twig","../../../app/administration/src/component/academy-product-note-modal/index.js"],"sourcesContent":["{% block sw_product_detail_content_tabs_additional %}\n    <sw-tabs-item\n        name=\"notes\"\n        :route=\"{ name: 'sw.product.detail.notes', params: { id: $route.params.id } }\"\n        :title=\"$tc('academy-product-notes.detail.tabNotes')\">\n        {{ $tc('academy-product-notes.detail.tabNotes') }}\n    </sw-tabs-item>\n{% endblock %}\n\n{% block sw_product_detail_content_view %}\n    <router-view\n        v-slot=\"{ Component }\"\n    >\n        <component\n            :is=\"Component\"\n            @cover-change=\"onCoverChange\"\n        />\n    </router-view>\n    \n    <sw-product-detail-notes \n        v-if=\"$route.name === 'sw.product.detail.notes'\"\n        :product=\"product\">\n    </sw-product-detail-notes>\n{% endblock %} ","import template from './sw-product-detail.html.twig';\n\nconst { Component } = Shopware;\n\nComponent.override('sw-product-detail', {\n    template,\n\n    computed: {\n        productCriteria() {\n            const criteria = this.$super('productCriteria');\n            criteria.addAssociation('academyProductNotes');\n            return criteria;\n        }\n    }\n}); ","<sw-card :title=\"$tc('academy-product-notes.detail.cardTitle')\" :isLoading=\"isLoading\">\n    <template #toolbar>\n        <sw-button \n            variant=\"primary\" \n            size=\"small\"\n            @click=\"onAddNote\">\n            {{ $tc('academy-product-notes.detail.buttonAddNote') }}\n        </sw-button>\n    </template>\n\n    <template #grid>\n        <sw-data-grid\n            v-if=\"notes.length > 0\"\n            :dataSource=\"notes\"\n            :columns=\"noteColumns\"\n            :showSelection=\"false\"\n            :isLoading=\"isLoading\">\n\n            <template #column-note=\"{ item }\">\n                <div class=\"academy-note-preview\">\n                    {{ item.note.length > 100 ? item.note.substring(0, 100) + '...' : item.note }}\n                </div>\n            </template>\n\n            <template #column-solved=\"{ item }\">\n                <sw-icon \n                    v-if=\"item.solved\" \n                    name=\"small-default-checkmark-line-medium\" \n                    color=\"#37d046\">\n                </sw-icon>\n                <sw-icon \n                    v-else \n                    name=\"small-default-x-line-medium\" \n                    color=\"#de294c\">\n                </sw-icon>\n            </template>\n\n            <template #column-createdAt=\"{ item }\">\n                {{ item.createdAt | date }}\n            </template>\n\n            <template #actions=\"{ item }\">\n                <sw-context-menu-item @click=\"onEditNote(item)\">\n                    {{ $tc('academy-product-notes.detail.buttonEdit') }}\n                </sw-context-menu-item>\n                <sw-context-menu-item \n                    variant=\"danger\"\n                    @click=\"onDeleteNote(item)\">\n                    {{ $tc('academy-product-notes.detail.buttonDelete') }}\n                </sw-context-menu-item>\n            </template>\n        </sw-data-grid>\n\n        <sw-empty-state\n            v-else\n            :title=\"$tc('academy-product-notes.detail.messageNoNotes')\">\n        </sw-empty-state>\n    </template>\n\n    <!-- Note Modal -->\n    <academy-product-note-modal\n        v-if=\"showModal\"\n        :note=\"currentNote\"\n        @save=\"onSaveNote\"\n        @close=\"onCloseModal\">\n    </academy-product-note-modal>\n\n    <!-- Delete Modal -->\n    <sw-modal\n        v-if=\"showDeleteModal\"\n        :title=\"$tc('academy-product-notes.detail.buttonDelete')\"\n        variant=\"small\"\n        @modal-close=\"onCancelDelete\">\n        <p>{{ $tc('academy-product-notes.detail.messageDeleteConfirm') }}</p>\n        \n        <template #modal-footer>\n            <sw-button \n                size=\"small\"\n                @click=\"onCancelDelete\">\n                {{ $tc('academy-product-notes.detail.buttonCancel') }}\n            </sw-button>\n            <sw-button \n                variant=\"danger\" \n                size=\"small\"\n                @click=\"onConfirmDelete\">\n                {{ $tc('academy-product-notes.detail.buttonDelete') }}\n            </sw-button>\n        </template>\n    </sw-modal>\n</sw-card> ","import template from './sw-product-detail-notes.html.twig';\n\nconst { Component, Mixin } = Shopware;\nconst { Criteria } = Shopware.Data;\n\nComponent.register('sw-product-detail-notes', {\n    template,\n\n    inject: ['repositoryFactory'],\n\n    mixins: [\n        Mixin.getByName('notification')\n    ],\n\n    props: {\n        product: {\n            type: Object,\n            required: true\n        }\n    },\n\n    data() {\n        return {\n            notes: [],\n            isLoading: false,\n            showModal: false,\n            currentNote: null,\n            showDeleteModal: false,\n            noteToDelete: null\n        };\n    },\n\n    computed: {\n        noteRepository() {\n            return this.repositoryFactory.create('academy_product_note');\n        },\n\n        noteColumns() {\n            return [\n                {\n                    property: 'userName',\n                    label: this.$tc('academy-product-notes.detail.columnUserName'),\n                    rawData: true\n                },\n                {\n                    property: 'note',\n                    label: this.$tc('academy-product-notes.detail.columnNote'),\n                    rawData: true\n                },\n                {\n                    property: 'solved',\n                    label: this.$tc('academy-product-notes.detail.columnSolved'),\n                    rawData: true\n                },\n                {\n                    property: 'createdAt',\n                    label: this.$tc('academy-product-notes.detail.columnCreatedAt'),\n                    rawData: true\n                }\n            ];\n        }\n    },\n\n    created() {\n        this.loadNotes();\n    },\n\n    methods: {\n        loadNotes() {\n            this.isLoading = true;\n            const criteria = new Criteria();\n            criteria.addFilter(Criteria.equals('productId', this.product.id));\n            criteria.addSorting(Criteria.sort('createdAt', 'DESC'));\n\n            this.noteRepository.search(criteria, Shopware.Context.api)\n                .then((result) => {\n                    this.notes = result;\n                })\n                .finally(() => {\n                    this.isLoading = false;\n                });\n        },\n\n        onAddNote() {\n            this.currentNote = this.noteRepository.create(Shopware.Context.api);\n            this.currentNote.productId = this.product.id;\n            this.currentNote.solved = false;\n            this.showModal = true;\n        },\n\n        onEditNote(note) {\n            this.currentNote = note;\n            this.showModal = true;\n        },\n\n        onDeleteNote(note) {\n            this.noteToDelete = note;\n            this.showDeleteModal = true;\n        },\n\n        onConfirmDelete() {\n            if (!this.noteToDelete) {\n                return;\n            }\n\n            this.noteRepository.delete(this.noteToDelete.id, Shopware.Context.api)\n                .then(() => {\n                    this.createNotificationSuccess({\n                        message: this.$tc('academy-product-notes.detail.messageDeleteSuccess')\n                    });\n                    this.loadNotes();\n                })\n                .catch(() => {\n                    this.createNotificationError({\n                        message: this.$tc('academy-product-notes.detail.messageError')\n                    });\n                })\n                .finally(() => {\n                    this.showDeleteModal = false;\n                    this.noteToDelete = null;\n                });\n        },\n\n        onCancelDelete() {\n            this.showDeleteModal = false;\n            this.noteToDelete = null;\n        },\n\n        onSaveNote() {\n            this.noteRepository.save(this.currentNote, Shopware.Context.api)\n                .then(() => {\n                    this.createNotificationSuccess({\n                        message: this.$tc('academy-product-notes.detail.messageSaveSuccess')\n                    });\n                    this.showModal = false;\n                    this.loadNotes();\n                })\n                .catch(() => {\n                    this.createNotificationError({\n                        message: this.$tc('academy-product-notes.detail.messageError')\n                    });\n                });\n        },\n\n        onCloseModal() {\n            this.showModal = false;\n            this.currentNote = null;\n        }\n    }\n}); ","import './page/sw-product-detail';\nimport './page/sw-product-detail-notes';\n\nconst { Module } = Shopware;\n\n// Extend the existing sw-product module with our notes route\nModule.register('sw-product', {\n    routes: {\n        detail: {\n            children: {\n                notes: {\n                    component: 'sw-product-detail-notes',\n                    path: 'notes',\n                    meta: {\n                        parentPath: 'sw.product.index',\n                        privilege: 'product.viewer',\n                    },\n                },\n            },\n        },\n    },\n}); ","<sw-modal\n    :title=\"modalTitle\"\n    @modal-close=\"onClose\">\n\n    <template #modal-body>\n        <sw-container columns=\"1fr\" gap=\"20px\">\n            <sw-text-field\n                v-model=\"note.userName\"\n                :label=\"$tc('academy-product-notes.detail.labelUserName')\"\n                :placeholder=\"$tc('academy-product-notes.detail.placeholderUserName')\"\n                required>\n            </sw-text-field>\n\n            <sw-textarea-field\n                v-model=\"note.note\"\n                :label=\"$tc('academy-product-notes.detail.labelNote')\"\n                :placeholder=\"$tc('academy-product-notes.detail.placeholderNote')\"\n                required>\n            </sw-textarea-field>\n\n            <sw-checkbox-field\n                v-model=\"note.solved\"\n                :label=\"$tc('academy-product-notes.detail.labelSolved')\">\n            </sw-checkbox-field>\n        </sw-container>\n    </template>\n\n    <template #modal-footer>\n        <sw-button \n            size=\"small\"\n            @click=\"onClose\">\n            {{ $tc('academy-product-notes.detail.buttonCancel') }}\n        </sw-button>\n        <sw-button \n            variant=\"primary\" \n            size=\"small\"\n            @click=\"onSave\">\n            {{ $tc('academy-product-notes.detail.buttonSave') }}\n        </sw-button>\n    </template>\n</sw-modal> ","import template from './academy-product-note-modal.html.twig';\n\nconst { Component } = Shopware;\n\nComponent.register('academy-product-note-modal', {\n    template,\n\n    props: {\n        note: {\n            type: Object,\n            required: true\n        }\n    },\n\n    computed: {\n        modalTitle() {\n            return this.note.isNew() \n                ? this.$tc('academy-product-notes.detail.buttonAddNote')\n                : this.$tc('academy-product-notes.detail.buttonEdit');\n        }\n    },\n\n    methods: {\n        onSave() {\n            this.$emit('save');\n        },\n\n        onClose() {\n            this.$emit('close');\n        }\n    }\n}); "],"names":["template$2","Component","template","criteria","template$1","Mixin","Criteria","result","note","Module"],"mappings":"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"}